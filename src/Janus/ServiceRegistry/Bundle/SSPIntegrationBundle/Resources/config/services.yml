services:
  janus_config_factory:
    class: Janus\ServiceRegistry\Bundle\SSPIntegrationBundle\DependencyInjection\SSPConfigFactory
    arguments:    ["%kernel.environment%"]

  janus_config:
    class: SimpleSAML_Configuration
    factory_service: janus_config_factory
    factory_method: create

  ssp_config:
    class: SimpleSAML_Configuration
    factory_class: SimpleSAML_Configuration
    factory_method: getInstance
    lazy: true

  ssp_session:
    class: SimpleSAML_Session
    factory_class: SimpleSAML_Session
    factory_method: getInstance
    lazy: true

  authentication_provider:
    class: Janus\ServiceRegistry\Bundle\SSPIntegrationBundle\DependencyInjection\AuthenticationProvider
    arguments: [@ssp_session, @janus_config]

  memcache:
    class: Memcache
    factory_class: Janus\ServiceRegistry\Bundle\SSPIntegrationBundle\DependencyInjection\MemcacheFactory
    factory_method: create
    arguments: [%memcache.server_groups%]
